<!DOCTYPE html>
<html>

<head>
    <link href="../../css/admin_style.css" rel="stylesheet" />
    <script defer src="../../js/admin_home.js"></script>
    <script src="../../components/modal/modal.js"></script>
    <script src="https://kit.fontawesome.com/ee112817f8.js" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.debug.js"></script>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>Администрация</title>
</head>

<body>
    <img class="logo" src="../../images/su-logo.png" alt="su-logo"/>
    <p class="su-header">СУ "СВ. КЛИМЕНТ ОХРИДСКИ"</p>
    <div class="navigation">
        <h2 class="navigation_element" id="diploma_header" onclick="showDiplomaSection()">
            ДИПЛОМИРАНЕ
        </h2>
        <div class="vertical_line"></div>
        <h2 class="navigation_element" id="attendance_header" onclick="showAttendanceSection()">
            ПРИСЪСТВАЩИ
        </h2>
        <div class="vertical_line"></div>
        <h2 class="navigation_element active_header" id="users_header" onclick="showUsers()">
            ПОТРЕБИТЕЛИ
        </h2>
        <div class="vertical_line"></div>
        <h2 class="navigation_element" id="students_header" onclick="showStudents()">
            СТУДЕНТИ
        </h2>
        <div class="vertical_line"></div>
        <h2 class="navigation_element" id="edit_header" onclick="showEditSection()">
            РЕДАКТИРАЙ
        </h2>
        <div class="vertical_line"></div>
        <h2 class="navigation_element" id="messages_header" onclick="showMessagesSection()">
            СЪОБЩЕНИЯ
        </h2>
        <div class="vertical_line"></div>
        <h2 class="navigation_element" id="settings_header" onclick="showSettingsSection()">
            НАСТРОЙКИ
        </h2>
        <div class="vertical_line"></div>
        <h2 class="navigation_element" id="analytic_header" onclick="showAnalyticsSection()">
            СТАТИСТИКА
        </h2>
        <div class="vertical_line"></div>

        <h2 class="navigation_element" id="logout_header">
            ИЗХОД <i class="fas fa-sign-out-alt"></i>
        </h2>
    </div>
    <div class="row">
        <div id="users_section">
            <h3><i class="fas fa-list"></i> Списък потребители</h3>
            <form id="export_files_users">
                <select class="file-extension-picker-short" name="format">
                    <option value="no" selected disabled hidden>Изберете файлов формат...</option>
                    <option value="csv">CSV</option>
                    <option value="txt">TextFile</option>
                    <option value="doc">MsWord</option>
                    <option value="xls">Excel</option>
                    <option value="pdf">PDF</option>
                </select>
                <button class="button" type="submit" onclick="downloadExportedUsers(event)">Изтегли <i
                        class="fas fa-file-export"></i></button>
            </form>
            <p class="message-bar" id="message-bar-export-users"></p>

            <table class="users-table" id="users-table">
                <tr>
                    <td>ID</td>
                    <td>Име</td>
                    <td>Имейл</td>
                    <td>Телефон</td>
                    <td>Роля</td>
                </tr>
            </table>
            <h3><i class="fas fa-folder-plus"></i> Въведи нови</h3>
            <form class="import_files" method="post">
                <label for="fileUsers" class="custom-file-upload">Изберете файл(ове)</label>
                <input type="file" name="file[]" id="fileUsers" accept=".txt,.csv, .doc, .xls, .pdf" multiple />
                <button class="button" type="submit" onclick="submitUsersFromFile(event)">Добави <i
                        class="fas fa-solid fa-plus"></i></button>
            </form>
            <p id="file-name1">Все още няма избрани файлове</p>
            <p class="message-bar" id="message-bar-users"></p>
            <form id="add_users_form" name="new_user_form" onsubmit="return false">
                <textarea class="form-input" name="userTextarea" id="userTextarea" rows="30"
                    placeholder='Формат: &NewLine;"имейл, парола, имена, телефон, роля"&NewLine;&NewLine;роля=[admin, moderator-hat,moderator-gown,moderator-signature]'></textarea>
                <button class="button long-button mt-5" type="submit" id="long-submit-button" onclick="submitUsers(event)">
                    Добави <i class="fas fa-solid fa-plus"></i>
                </button>
            </form>
        </div>

        <div id="students_section">
            <h3><i class="fas fa-list"></i> Списък студенти</h3>
            <form id="export_files_student">
                <select class="file-extension-picker-short" name="format">
                    <option value="no" selected disabled hidden>Изберете файлов формат...</option>
                    <option value="csv">CSV</option>
                    <option value="txt">TextFile</option>
                    <option value="doc">MsWord</option>
                    <option value="xls">Excel</option>
                    <option value="pdf">PDF</option>
                </select>
                <button class="button" type="submit"  onclick="downloadExportedStudents(event)">Изтегли <i
                        class="fas fa-file-export"></i></button>
            </form>
            <p class="message-bar" id="message-bar-export-student"></p>
            <table class="students-table" id="students-table">
                <tr>
                    <td>ID</td>
                    <td>Име</td>
                    <td>Имейл</td>
                    <td>Телефон</td>
                    <td>ФН</td>
                    <td>Степен</td>
                    <td>Спец.</td>
                    <td>Група</td>
                    <td>Дипломиращ се</td>
                    <td>Роля</td>
                </tr>
            </table>
            <h3><i class="fas fa-folder-plus"></i> Въведи нови</h3>
            <form class="import_files" method="post">
                <label for="fileStudent" class="custom-file-upload">Изберете файл(ове)</label>
                <input type="file" name="file[]" id="fileStudent" accept=".txt,.csv, .doc, .xls, .pdf" multiple />
                <button class="button" type="submit"  onclick="submitStudentsFromFile(event)">Добави <i
                        class="fas fa-solid fa-plus"></i></button>
            </form>
            <p id="file-name2">Все още няма избрани файлове</p>

            <p class="message-bar" id="message-bar-students"></p>
            <form id="add_students_form" name="add_students_form" onsubmit="return false">
                <textarea class="form-input" name="studentTextarea" id="studentTextarea" rows="30"
                    placeholder="Формат: &NewLine;&quot;имейл, парола, имена, телефон, роля, ФН, степен, специалност, група, оценка от диплома&quot;&NewLine;&NewLine;роля=[student]&NewLine;степен=[Б, М, Д]&NewLine;специалност=[КН, СИ, ИС, И, М, ПМ, С], ако степен=Б&NewLine;група=[1, 2, 3, 4, 5, 6, 7, 8], ако degree=Б&NewLine;оценка = число с плаваща запетая или '-', ако е студент от долен курс"></textarea>
                <button class="button long-button mt-5" type="submit" onclick="submitStudents(event)">
                    Добави <i class="fas fa-solid fa-plus"></i>
                </button>
            </form>
        </div>

        <div id="edit_section">
            <popup-modal id="edit_user_modal" modal-title="Редактиранe" width="30%">
                <form id="edit_selected_user_form" name="edit_selected_user_form" >
                    <p id="message-bar-modal-edit-users"></p>
                    <input type="text" class="settings" name="role" id="user_role" placeholder="Роля" disabled/>
                    <input type="text" class="settings" name="name" id="user_name" placeholder="Име на потребителя" />
                    <input type="email" class="settings" name="email" id="user_email" placeholder="Имейл на потребителя" />
                    <input type="text" class="settings" name="phone" id="user_phone" placeholder="Телефон на потребителя" />
                    <div id="edit-user-button-section">
                        <button class="button" onclick="editSelectedUser(event)">Редактирай</button>
                        <button class="button delete-button" onclick="deleteSelectedUser(event)">Премахни потребител</button>
                    </div>
                </form>
            </popup-modal> 
            <h3><i class="fas fa-list"></i> Списък потребители</h3>
            <h4>Можете да редактирате няколко потребителя с формата под таблицата или да редактирате конкретен потребител като натиснете върху него на таблицата.</h4>
            <p class="message-bar" id="message-bar-edit-users"></p>
            <table class="edit-users-table" id="edit-users-table">
                <tr>
                    <td>ID</td>
                    <td>Име</td>
                    <td>Имейл</td>
                    <td>Телефон</td>
                    <td>Роля</td>
                </tr>
            </table>
            <h3><i class="fas fa-user-edit"></i> Редактиране</h3>
            <form id="edit_users_form" name="edit_users_form" onsubmit="return false">
                <textarea class="form-input" name="editUsersTextarea" id="editUsersTextarea" rows="30"
                    placeholder='Формат: &NewLine;"ID, Име, Имейл, Телефон"&NewLine;&NewLine;ID - идентификационен номер на потребителя, чийто данни ще променяте&NewLine;Име - новото име(при нужда на промяна), ако не бъде променяно се записва старото име&NewLine;Имейл - новият имейл(при нужда на промяна), ако не бъде променян се записва стария имейл&NewLine;телефон - новият телефон(при нужда на промяна), ако не бъде променян се записва стария телефон'></textarea>
                    <button class="button long-button mt-5" type="submit" onclick="editUsers(event)">
                        Редактирай
                    </button>
            </form>
        </div>

        <div id="messages_send_section">
            <h3><i class="fas fa-envelope"></i> Изпращане на съобщения до студенти и модератори</h3>
            <form id="write-message">
                <div id="textarea">
                    <textarea class="dashboard-textarea-fn" name="textarea" id="textarea-emails"
                        placeholder="Моля, въведете:&NewLine;- Имейли, отделени със запетаи; &NewLine;- `@Студенти`, ако искате да изпратите съобщението до всички дипломиращи се студенти; &NewLine;- `@Шапки`, ако искате да изпратите съобщението до всички отговорници за шапки; &NewLine;- `@Тоги`, ако искате да изпратите съобщението до всички отговорници за тоги; &NewLine;- `@Подписи`, ако искате да изпратите съобщението до всички отговорници за подписи;"></textarea>
                    <textarea class="dashboard-textarea-fn" name="message" id="message"
                        placeholder="Напишете вашето съобщение"></textarea>
                </div>
                <button class="button long-button mt-5" type="submit" class="submit-button-users" id="send-message" onclick="sendMessage(event)">Изпрати
                    <i class="fa fa-send-o"></i>
                </button>
                <p class="message-bar" id="message-bar-export-message"></p>
            </form>
        </div>

        <div id="settings_section">
            <h3><i class="fa fa-plus-square"></i> Добавяне на информация относно дипломирането</h3>
            <table id="info-graduation-table1">
                <tr>
                    <td>Начален час</td>
                    <td>Интервал между студентите</td>
                    <td>Дата на дипломирането</td>
                    <td>Място на дипломирането</td>
                    <td>Година на завършване</td>
                </tr>
            </table>
            <h4>Внимание! Ако добавите минала дата, то студентите автоматично ще бъдат добавени в архив и премахнати от
                тук!</h4>
            <form class="input">
                <input type="text" id="start-time" class="settings" placeholder="Начален час(час:минути)" />
                <input type="text" id="students-interval" class="settings" placeholder="Интервал(минути:секунди)" />
                <input type="text" id="graduation-date" class="settings" name="grad-date" placeholder="Дата"
                    onfocus="(this.type='date')" onblur="(this.type='text')" />
                <input type="text" id="graduation-place" class="settings" placeholder="Местоположение" />
                <input type="number" id="class" class="settings" placeholder="Година на завършване" min="2020" />

            </form>
            <button type="submit" class="button add-grad-info" onclick="getClassArchiveInfo(event)"> Обнови <i
                class="fa fa-plus"></i></button>
            <p class="message-bar" id="message-add-graduation-info"></p>
        </div>


        <div id="analytic_section">
            <h3 id="analytic_text"></h3>
            <div id="analytics1" class="analytics"></div>
            <div id="analytics2" class="analytics"></div>
            <div id="analytics3" class="analytics"></div>
            <div id="analytics4" class="analytics"></div>
        </div>

        <div id="attendance_section">
            <h3><i class="fas fa-list"></i> Списък студенти</h3>
            <div class="filters">

                <input id="searchAttendance" class="search" placeholder="Търсене..."
                    oninput="searchInTable('attendance-table','searchAttendance')" />

                <form id="export_att_graduated">
                    <select class="file-extension-picker-long" name="formatatt">
                        <option value="no" selected disabled hidden>Изберете файлов формат...</option>
                        <option value="csv">CSV</option>
                        <option value="txt">TextFile</option>
                        <option value="doc">MsWord</option>
                        <option value="xls">Excel</option>
                        <option value="pdf">PDF</option>
                    </select>
                    <button class="button" type="submit" id="export-att-graduated"
                        onclick="downloadExportedAttGraduated(event)">Изтегли <i class="fas fa-file-export"></i>
                    </button>
                </form>
            </div>
            <p class="message-bar" id="message-bar-export-attendance"></p>

            <table class="diploma-table" id="attendance-table">
                <tr>
                    <td>ФН</td>
                    <td>Име</td>
                    <td>Степен</td>
                    <td>Спец.</td>
                    <td>Група</td>
                    <td>Успех</td>
                    <td>Присъствие</td>
                    <td>Има право</td>
                    <td>Модератор за диплома</td>
                    <td>Готова диплома</td>
                    <td>Взета</td>
                    <td>Заявка взимане предв.</td>
                    <td>Коментар (студент)</td>
                    <td>Взета предв.</td>
                    <td>Коментар (администр.)</td>
                    <td>Покана реч</td>
                    <td>Отговор</td>
                    <td>Снимки</td>
                    <td>Модератор за тога</td>
                    <td>Заявена тога</td>
                    <td>Взета</td>
                    <td>Върната</td>
                    <td>Модератор за шапка</td>
                    <td>Заявена шапка</td>
                    <td>Взета</td>
                </tr>
            </table>

        </div>

        <div id="diploma_section">
            <h3><i class="fas fa-list"></i> Списък студенти</h3>
            <div class="filters">

                <input id="search" class="search" placeholder="Търсене..."
                    oninput="searchInTable('diploma-table','search')" />

                <form id="export_graduated">
                    <select class="file-extension-picker-long" name="format">
                        <option value="no" selected disabled hidden>Изберете файлов формат...</option>
                        <option value="csv">CSV</option>
                        <option value="txt">TextFile</option>
                        <option value="doc">MsWord</option>
                        <option value="xls">Excel</option>
                        <option value="pdf">PDF</option>
                    </select>
                    <button class="button" id="export-graduated"
                        onclick="downloadExportedGraduated(event)">Изтегли <i class="fas fa-file-export"></i>
                    </button>
                </form>
            </div>
            <p class="message-bar" id="message-bar-export-graduated"></p>

            <table class="diploma-table" id="diploma-table">
                <tr>
                    <td>ФН</td>
                    <td>Име</td>
                    <td>Цвят</td>
                    <td>Ред на връчване</td>
                    <td>Час на връчване</td>
                    <td>Степен</td>
                    <td>Спец.</td>
                    <td>Група</td>
                    <td>Успех</td>
                    <td>Присъствие</td>
                    <td>Има право</td>
                    <td>Модератор за диплома</td>
                    <td>Готова диплома</td>
                    <td>Взета</td>
                    <td>Заявка взимане предв.</td>
                    <td>Коментар (студент)</td>
                    <td>Взета предв.</td>
                    <td>Коментар (администр.)</td>
                    <td>Покана реч</td>
                    <td>Отговор</td>
                    <td>Снимки</td>
                    <td>Модератор за тога</td>
                    <td>Заявена тога</td>
                    <td>Взета</td>
                    <td>Върната</td>
                    <td>Модератор за шапка</td>
                    <td>Заявена шапка</td>
                    <td>Взета</td>
                </tr>
            </table>

            <h3><i class="fas fa-user-edit"></i> Редактиране</h3>
            <form class="dashboard" id="dashboard">
                <textarea class="dashboard-textarea-fn" name="dashboard-textarea" id="dashboard_textarea"
                    placeholder="Факултетни номера (отделени със запетая)"></textarea>
                <select class="dashboard-action" id="dashboard_action"
                    onchange="showDashboardAdditionalInputElement(this.value)">
                    <option value="" selected disabled hidden>Изберете действие...</option>
                    <option value="1">Право на диплома</option>
                    <option value="2">Готова диплома</option>
                    <option value="3">Взета</option>
                    <option value="4">Взета предварително</option>
                    <option value="5">Коментар</option>
                    <option value="6">Покана за реч</option>
                    <option value="7">Взета тога</option>
                    <option value="8">Върната тога</option>
                    <option value="9">Взета шапка</option>
                    <option value="10">Върната шапка</option>
                </select>
                <select class="boolean-select-after-select" id="boolean_select_after_select">
                    <option value="" selected disabled hidden>Изберете стойност...</option>
                    <option value="Да">Да</option>
                    <option value="Не">Не</option>
                </select>
                <textarea class="textarea-after-select" id="textarea_after_select" placeholder="Коментар..."></textarea>
                <button class="button" type="submit" id="submit_action"  onclick="submitAction(event)">
                    Запази <i class="far fa-save"></i>
                </button>
            </form>
            <p class="message-bar" id="message-bar-diploma"></p>
        </div>
    </div>

    <div class="row" id="messages_receive_section">
        <h3><i class="fas fa-envelope"></i> Получени съобщения</h3>
        <div id="notifications"></div>
    </div>

    <div class="row" id="settings_date_section">
        <h3><i class="fas fa-calendar-alt"></i> Настройки на крайни срокове </h3>
        <table id="info-graduation-table2">
            <tr>
                <td>Краен срок за заявка за тога</td>
                <td>Краен срок за заявка за шапка</td>
                <td>Краен срок за потвърждаване на присъствие</td>
            </tr>
        </table>

        <h4>Внимание! Не може да задавате дата, която е след дипломирането!
        </h4>
        <form class="input" id="deadline">
            <input type="text" id="date-gown" class="settings" name="date-gown" placeholder="Дата за тога"
                onfocus="(this.type='date')" onblur="(this.type='text')" />
            <input type="text" id="date-hat" class="settings" name="date-hat" placeholder="Дата за шапка"
                onfocus="(this.type='date')" onblur="(this.type='text')" />
            <input type="text" id="date-attendance" class="settings" name="date-attendance"
                placeholder="Дата за присъствие" onfocus="(this.type='date')" onblur="(this.type='text')" />
        </form>
        <button type="submit" class="button add-grad-info" onclick="sendDeadlineInfo(event)"> Обнови <i
            class="fa fa-plus"></i></button>
        <p class="message-bar" id="message-add-deadline-info"></p>
    </div>

    <div class="row" id="settings_archive_section">
        <h3><i class="fa fa-archive"></i> Архив </h3>
        <div id="for_buttons"></div>
    </div>


    <div class="row excellent_order" id="excellent_order">
        <h3><i class="fas fa-list"></i> Списък със студенти, които ще бъдат наградени</h3>
        <form id="export_excellent">
            <select class="file-extension-picker-short" name="format">
                <option value="no" selected disabled hidden>Изберете файлов формат...</option>
                <option value="csv">CSV</option>
                <option value="txt">TextFile</option>
                <option value="doc">MsWord</option>
                <option value="xls">Excel</option>
                <option value="pdf">PDF</option>
            </select>
            <button class="button" type="submit" id="export-excellent" onclick="downloadExcellentStudent(event)">Изтегли списък с
                отличници <i class="fas fa-file-export"></i>
            </button>
        </form>
        <p class="message-bar" id="message-bar-export-excellent"></p>
    </div>

    <div class="row distribute_moderators" id="distribute_moderators">
        <h3><i class="fas fa-clipboard-list"></i> Разпределяне на Отговорностите на Модераторите</h3>
        <button class="button long-button mt-5" id="distribute_moderators_button" type="button" onclick="distributeModerators(event)">Разпредели
            Модераторите</button>
        <p class="message-bar" id="message-bar-distribute-moderators"></p>
    </div>

    <div class="row diploma_order_section" id="diploma_order_section">
        <h3><i class="fas fa-user-graduate"></i> Пореден списък за връчване на дипломи</h3>
        <form id="diploma_order_form">
            <select id="diploma_order_1" name="diploma_order_1" class="diploma_order_select"
                onclick="getCurrOption(this)" onchange="removeValueFromOtherLists(this, )">
                <option value="-1" selected disabled hidden>Параметър 1</option>
                <option value="fn">ФН</option>
                <option value="name">Име</option>
                <option value="degree">Степен</option>
                <option value="major">Специалност</option>
                <option value="group">Група</option>
                <option value="grade">Успех</option>
            </select>
            <select id="diploma_order_2" name="diploma_order_2" class="diploma_order_select"
                onclick="getCurrOption(this)" onchange="removeValueFromOtherLists(this, 2)">
                <option value="-1" selected disabled hidden>Параметър 2</option>
                <option value="fn">ФН</option>
                <option value="name">Име</option>
                <option value="degree">Степен</option>
                <option value="major">Специалност</option>
                <option value="group">Група</option>
                <option value="grade">Успех</option>
            </select>
            <select id="diploma_order_3" name="diploma_order_3" class="diploma_order_select"
                onclick="getCurrOption(this)" onchange="removeValueFromOtherLists(this, 3)">
                <option value="-1" selected disabled hidden>Параметър 3</option>
                <option value="fn">ФН</option>
                <option value="name">Име</option>
                <option value="degree">Степен</option>
                <option value="major">Специалност</option>
                <option value="group">Група</option>
                <option value="grade">Успех</option>
            </select>
            <select id="diploma_order_4" name="diploma_order_4" class="diploma_order_select"
                onclick="getCurrOption(this)" onchange="removeValueFromOtherLists(this, 4)">
                <option value="-1" selected disabled hidden>Параметър 4</option>
                <option value="fn">ФН</option>
                <option value="name">Име</option>
                <option value="degree">Степен</option>
                <option value="major">Специалност</option>
                <option value="group">Група</option>
                <option value="grade">Успех</option>
            </select>
            <select id="diploma_order_5" name="diploma_order_5" class="diploma_order_select"
                onclick="getCurrOption(this)" onchange="removeValueFromOtherLists(this)">
                <option value="-1" selected disabled hidden>Параметър 5</option>
                <option value="fn">ФН</option>
                <option value="name">Име</option>
                <option value="degree">Степен</option>
                <option value="major">Специалност</option>
                <option value="group">Група</option>
                <option value="grade">Успех</option>
            </select>
            <select id="diploma_order_6" name="diploma_order_6" class="diploma_order_select"
                onclick="getCurrOption(this)" onchange="removeValueFromOtherLists(this)">
                <option value="-1" selected disabled hidden>Параметър 6</option>
                <option value="fn">ФН</option>
                <option value="name">Име</option>
                <option value="degree">Степен</option>
                <option value="major">Специалност</option>
                <option value="group">Група</option>
                <option value="grade">Успех</option>
            </select>
            <button class="button" type="submit" id="submit_action"  onclick="submitDiplomaOrder(event)">
                Запази <i class="far fa-save"></i>
            </button>
            <p class="message-bar" id="message-bar-diploma-order"></p>
        </form>
    </div>
</body>

</html>